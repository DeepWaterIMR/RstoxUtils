<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Open and visualize Biotic data â€¢ RstoxUtils</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Open and visualize Biotic data">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">RstoxUtils</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/BioticData.html">Biotic</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/LandingsData.html">Sales notes</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/ERSdata.html">Electronic Reporting System</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/CodeDefinitions.html">Definitons</a></li>
    <li><hr class="dropdown-divider"></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/DeepWaterIMR/RstoxUtils/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">


<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Open and visualize Biotic data</h1>
                        <h4 data-toc-skip class="author">Mikko Vihtakari (Institute of Marine Research)</h4>
            
            <h4 data-toc-skip class="date">15 September, 2025</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/DeepWaterIMR/RstoxUtils/blob/HEAD/vignettes/BioticData.Rmd" class="external-link"><code>vignettes/BioticData.Rmd</code></a></small>
      <div class="d-none name"><code>BioticData.Rmd</code></div>
    </div>

    
    
<p>Packages required to run the examples:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Package names</span></span>
<span><span class="va">packages</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RstoxUtils"</span>, <span class="st">"ggplot2"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Install packages not yet installed</span></span>
<span><span class="va">installed_packages</span> <span class="op">&lt;-</span> <span class="va">packages</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html" class="external-link">installed.packages</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/any.html" class="external-link">any</a></span><span class="op">(</span><span class="va">installed_packages</span> <span class="op">==</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  </span>
<span>  <span class="kw">if</span><span class="op">(</span><span class="st">"RstoxUtils"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">packages</span><span class="op">[</span><span class="op">!</span><span class="va">installed_packages</span><span class="op">]</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"DeepWaterIMR/RstoxUtils"</span>, upgrade <span class="op">=</span> <span class="st">"never"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="va">installed_packages</span> <span class="op">&lt;-</span> <span class="va">packages</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html" class="external-link">installed.packages</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="va">packages</span><span class="op">[</span><span class="op">!</span><span class="va">installed_packages</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Load the packages to the workspace</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">packages</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressPackageStartupMessages</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">x</span>, character.only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">}</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The IMR database data are distributed as <a href="https://confluence.imr.no/display/API/Biotic+V3+API+documentation" class="external-link">.xml files of a certain structure</a>. The <code><a href="https://rdrr.io/pkg/RstoxData/man/readXmlFile.html" class="external-link">RstoxData::readXmlFile</a></code> function reads these files, but due to the data architecture, information is spread across multiple data frames in the standard format. The <code><a href="../reference/processBioticFile.html">RstoxUtils::processBioticFile</a></code> function combines the data in station-based (<code>stnall</code> element in the list architecture) and individual fish-based (<code>indall</code>) formats. The <code><a href="../reference/processBioticFiles.html">RstoxUtils::processBioticFiles</a></code> function does the same for multiple .xml files.</p>
<p>These functions may come in handy for reports and software development where only few xml files are needed. If you want to access the entire Biotic database, it is recommended to use the the <a href="https://github.com/DeepWaterIMR/BioticExplorerServer" class="external-link">BioticExplorerServer</a> package.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xml.example</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"example.xml"</span>, package <span class="op">=</span> <span class="st">"RstoxUtils"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">standard.format</span> <span class="op">&lt;-</span> <span class="fu">RstoxData</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/RstoxData/man/readXmlFile.html" class="external-link">readXmlFile</a></span><span class="op">(</span><span class="va">xml.example</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## The data are as a list organized under multiple data.frames</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">standard.format</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "missions"                       "mission"                       </span></span>
<span><span class="co">#&gt;  [3] "fishstation"                    "catchsample"                   </span></span>
<span><span class="co">#&gt;  [5] "individual"                     "prey"                          </span></span>
<span><span class="co">#&gt;  [7] "agedetermination"               "preylengthfrequencytable"      </span></span>
<span><span class="co">#&gt;  [9] "copepodedevstagefrequencytable" "tag"                           </span></span>
<span><span class="co">#&gt; [11] "metadata"</span></span>
<span></span>
<span><span class="co">## Station-based data are organized under 3 data frames</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">standard.format</span><span class="op">$</span><span class="va">mission</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]  6 11</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">standard.format</span><span class="op">$</span><span class="va">fishstation</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 59 74</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">standard.format</span><span class="op">$</span><span class="va">catchsample</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 84 36</span></span>
<span></span>
<span><span class="co">## Individual-based data have 2 additional data frames</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">standard.format</span><span class="op">$</span><span class="va">individual</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 446  56</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">standard.format</span><span class="op">$</span><span class="va">agedetermination</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 52 39</span></span>
<span></span>
<span><span class="co">## The user has to merge these data frames to work with the data</span></span>
<span><span class="co">## RstoxUtils addresses this issue and merges the data</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/DeepWaterIMR/RstoxUtils" class="external-link">RstoxUtils</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">Utils.format</span> <span class="op">&lt;-</span> <span class="fu">RstoxUtils</span><span class="fu">::</span><span class="fu"><a href="../reference/processBioticFile.html">processBioticFile</a></span><span class="op">(</span><span class="va">xml.example</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Station-based data can now be found from 1 data frame</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">Utils.format</span><span class="op">$</span><span class="va">stnall</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 84 55</span></span>
<span></span>
<span><span class="co">## The same applies for individual-based-data </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">Utils.format</span><span class="op">$</span><span class="va">indall</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 446  62</span></span>
<span></span>
<span><span class="co">## The uniting ID tags in the Utils format are</span></span>
<span><span class="co"># missionid, startyear, serialno, catchsampleid and sometimes cruise for station based format</span></span>
<span><span class="co"># The abovementioned and specimenid</span></span></code></pre></div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mikko Vihtakari.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
